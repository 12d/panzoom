(function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.panzoom=e()}})(function(){var e,t,n;return function(){function e(t,n,i){function s(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return s(n||e)},c,c.exports,e,t,n,i)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)s(i[u]);return s}return e}()({1:[function(e,t,n){function d(e,t){function R(e){var t=U(d.clientWidth,d.clientHeight),n=e.right-e.left,r=e.bottom-e.top;if(!Number.isFinite(n)||!Number.isFinite(r))throw new Error("Invalid rectangle");var i=t.x/n,s=t.y/r,o=Math.min(i,s);E.x=-(e.left+n/2)*o+t.x/2,E.y=-(e.top+r/2)*o+t.y/2,E.scale=o}function U(e,t){if(n.getScreenCTM){var r=n.getScreenCTM(),i=r.a,s=r.d,o=r.e,u=r.f;g.x=e*i-o,g.y=t*s-u}else g.x=e,g.y=t;return g}function z(){var e,t,r=0,i=0,s=K();if(s)r=s.left,i=s.top,e=s.right-s.left,t=s.bottom-s.top;else{var o=d.getBoundingClientRect();e=o.width,t=o.height}var u=n.getBBox();if(u.width===0||u.height===0)return;var a=t/u.height,f=e/u.width,l=Math.min(f,a);E.x=-(u.left+u.width/2)*l+e/2+r,E.y=-(u.top+u.height/2)*l+t/2+i,E.scale=l}function W(){return E}function X(){return{x:E.x,y:E.y}}function V(e,t){E.x=e,E.y=t,J(),Ot("pan"),Y()}function $(e,t){V(E.x+e,E.y+t)}function J(){var e=K();if(!e)return;var t=!1,n=Q(),r=e.left-n.right;return r>0&&(E.x+=r,t=!0),r=e.right-n.left,r<0&&(E.x+=r,t=!0),r=e.top-n.bottom,r>0&&(E.y+=r,t=!0),r=e.bottom-n.top,r<0&&(E.y+=r,t=!0),t}function K(){if(!x)return;if(typeof x=="boolean"){var e=d.getBoundingClientRect(),t=e.width,n=e.height;return{left:t*C,top:n*C,right:t*(1-C),bottom:n*(1-C)}}return x}function Q(){var e=n.getBBox(),t=G(e.left,e.top);return{left:t.x,top:t.y,right:e.width*E.scale+t.x,bottom:e.height*E.scale+t.y}}function G(e,t){return{x:e*E.scale+E.x,y:t*E.scale+E.y}}function Y(){w=!0,O=window.requestAnimationFrame(ot)}function Z(e,t,n){if(y(e)||y(t)||y(n))throw new Error("zoom requires valid numbers");var r=E.scale*n;if(r<N){if(E.scale===N)return;n=N/E.scale}if(r>T){if(E.scale===T)return;n=T/E.scale}var i=U(e,t);E.x=i.x-n*(i.x-E.x),E.y=i.y-n*(i.y-E.y);var s=J();s||(E.scale*=n),Ot("zoom"),Y()}function et(e,t,n){var r=n/E.scale;Z(e,t,r)}function tt(e){var t=e.ownerSVGElement;if(!t)throw new Error("ui element is required to be within the scene");var n=e.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2,s=t.getBoundingClientRect(),o=s.width/2-r,u=s.height/2-i;nt(o,u,!0)}function nt(e,t,n){if(!n)return $(e,t);F&&F.cancel();var r={x:0,y:0},s={x:e,y:t},o=0,u=0;F=i(r,s,{step:function(e){$(e.x-o,e.y-u),o=e.x,u=e.y}})}function rt(e,t){Ct(),V(e,t)}function it(){r.removeWheelListener(d,St),d.removeEventListener("mousedown",gt),d.removeEventListener("keydown",at),d.removeEventListener("dblclick",mt),O&&(window.cancelAnimationFrame(O),O=0),j.cancel(),wt(),Et(),At()}function st(){d.addEventListener("mousedown",gt),d.addEventListener("dblclick",mt),d.addEventListener("touchstart",ft),d.addEventListener("keydown",at),r.addWheelListener(d,St),Y()}function ot(){w&&ut()}function ut(){w=!1,n.applyTransform(E),Ot("transform"),O=0}function at(e){var t=0,n=0,r=0;if(e.keyCode===38)n=1;else if(e.keyCode===40)n=-1;else if(e.keyCode===37)t=1;else if(e.keyCode===39)t=-1;else if(e.keyCode===189||e.keyCode===109)r=1;else if(e.keyCode===187||e.keyCode===107)r=-1;if(t||n){e.preventDefault(),e.stopPropagation();var i=d.getBoundingClientRect(),s=Math.min(i.width,i.height),o=.05,u=s*o*t,a=s*o*n;nt(u,a)}if(r){var f=kt(r),l=d.getBoundingClientRect();Nt(l.width/2,l.height/2,f)}}function ft(e){lt(e);if(e.touches.length===1)return ct(e,e.touches[0]);e.touches.length===2&&(B=vt(e.touches[0],e.touches[1]),q=!0,ht())}function lt(e){if(t.onTouch&&!t.onTouch(e))return;e.stopPropagation(),e.preventDefault()}function ct(e){var t=e.touches[0],n=xt(t);P=n.x,H=n.y,ht()}function ht(){_||(_=!0,document.addEventListener("touchmove",pt),document.addEventListener("touchend",dt),document.addEventListener("touchcancel",dt))}function pt(e){if(e.touches.length===1){e.stopPropagation();var t=e.touches[0],n=xt(t),r=n.x-P,i=n.y-H;r!==0&&i!==0&&Lt(),P=n.x,H=n.y;var s=U(r,i);nt(s.x,s.y)}else if(e.touches.length===2){q=!0;var o=e.touches[0],u=e.touches[1],a=vt(o,u),f=1;if(S)f=a/B;else{var l=0;a<B?l=1:a>B&&(l=-1),f=kt(l)}P=(o.clientX+u.clientX)/2,H=(o.clientY+u.clientY)/2,Nt(P,H,f),B=a,e.stopPropagation(),e.preventDefault()}}function dt(e){if(e.touches.length>0){var t=xt(e.touches[0]);P=t.x,H=t.y}else{var n=new Date;n-M<p&&Tt(P,H,k),M=n,_=!1,At(),Et()}}function vt(e,t){return Math.sqrt((e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY))}function mt(e){var t=xt(e);Tt(t.x,t.y,k),e.preventDefault(),e.stopPropagation()}function gt(e){if(_)return e.stopPropagation(),!1;var t=e.button===1&&window.event!==null||e.button===0;if(!t)return;var n=xt(e),r=U(n.x,n.y);return P=r.x,H=r.y,document.addEventListener("mousemove",yt),document.addEventListener("mouseup",bt),u.capture(e.target||e.srcElement),!1}function yt(e){if(_)return;Lt();var t=xt(e),n=U(t.x,t.y),r=n.x-P,i=n.y-H;P=n.x,H=n.y,nt(r,i)}function bt(){u.release(),At(),wt()}function wt(){document.removeEventListener("mousemove",yt),document.removeEventListener("mouseup",bt),D=!1}function Et(){document.removeEventListener("touchmove",pt),document.removeEventListener("touchend",dt),document.removeEventListener("touchcancel",dt),D=!1,q=!1}function St(e){if(L(e))return;j.cancel();var t=kt(e.deltaY);if(t!==1){var n=xt(e);Nt(n.x,n.y,t),e.preventDefault()}}function xt(e){var t,n,r=d.getBoundingClientRect();return t=e.clientX-r.left,n=e.clientY-r.top,{x:t,y:n}}function Tt(e,t,n){var r=E.scale,s={scale:r},o={scale:n*r};j.cancel(),Ct(),Ot("zoom"),I=i(s,o,{step:function(n){et(e,t,n.scale)}})}function Nt(e,t,n){return j.cancel(),Ct(),Z(e,t,n)}function Ct(){I&&(I.cancel(),I=null)}function kt(e){var t=1;return e>0?t=1-A:e<0&&(t=1+A),t}function Lt(){D||(Ot("panstart"),D=!0,j.start())}function At(){D&&(q||j.stop(),Ot("panend"))}function Ot(t){var n=o(t);e.dispatchEvent(n)}t=t||{};var n=t.controller;n||(e instanceof SVGElement&&(n=f(e)),e instanceof HTMLElement&&(n=l(e)));if(!n)throw new Error("Cannot create panzoom for the current type of dom element");var d=n.getOwner(),g={x:0,y:0},w=!1,E=new a;n.initTransform&&n.initTransform(E);var S=typeof t.realPinch=="boolean"?t.realPinch:!1,x=t.bounds,T=typeof t.maxZoom=="number"?t.maxZoom:Number.POSITIVE_INFINITY,N=typeof t.minZoom=="number"?t.minZoom:0,C=typeof t.boundsPadding=="number"?t.boundsPadding:.05,k=typeof t.zoomDoubleClickSpeed=="number"?t.zoomDoubleClickSpeed:h,L=t.beforeWheel||v,A=typeof t.zoomSpeed=="number"?t.zoomSpeed:c;m(x),t.autocenter&&z();var O,M=0,_=!1,D=!1,P,H,B,j;"smoothScroll"in t&&!t.smoothScroll?j=b():j=s(X,rt,t.smoothScroll);var F,I,q;return st(),{dispose:it,moveBy:nt,moveTo:V,centerOn:tt,zoomTo:Nt,zoomAbs:et,smoothZoom:Tt,getTransform:W,showRectangle:R}}function v(){}function m(e){var t=typeof e;if(t==="undefined"||t==="boolean")return;var n=g(e.left)&&g(e.top)&&g(e.bottom)&&g(e.right);if(!n)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function g(e){return Number.isFinite(e)}function y(e){return Number.isNaN?Number.isNaN(e):e!==e}function b(){return{start:v,stop:v,cancel:v}}var r=e("wheel"),i=e("amator"),s=e("./lib/kinetic.js"),o=e("./lib/createEvent.js"),u=e("./lib/textSelectionInterceptor.js")(),a=e("./lib/transform.js"),f=e("./lib/svgController.js"),l=e("./lib/domController.js"),c=.065,h=1.75,p=300;t.exports=d},{"./lib/createEvent.js":2,"./lib/domController.js":3,"./lib/kinetic.js":4,"./lib/svgController.js":5,"./lib/textSelectionInterceptor.js":6,"./lib/transform.js":7,amator:8,wheel:10}],2:[function(e,t,n){function i(e){if(r){var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!0,!0,undefined),t}return new Event(e,{bubbles:!0})}t.exports=i;var r=typeof Event!="function"},{}],3:[function(e,t,n){function r(e){function i(){return n}function s(){return{left:0,top:0,width:e.clientWidth,height:e.clientHeight}}function o(t){e.style.transformOrigin="0 0 0",e.style.transform="matrix("+t.scale+", 0, 0, "+t.scale+", "+t.x+", "+t.y+")"}var t=e instanceof HTMLElement;if(!t)throw new Error("svg element is required for svg.panzoom to work");var n=e.parentElement;if(!n)throw new Error("Do not apply panzoom to the detached DOM element. ");e.scrollTop=0,n.setAttribute("tabindex",1);var r={getBBox:s,getOwner:i,applyTransform:o};return r}t.exports=r},{}],4:[function(e,t,n){function r(e,t,n){function m(){window.clearInterval(a),window.cancelAnimationFrame(v)}function g(){s=e(),c=d=f=h=0,o=new Date,window.clearInterval(a),window.cancelAnimationFrame(v),a=window.setInterval(y,100)}function y(){var t=Date.now(),n=t-o;o=t;var r=e(),i=r.x-s.x,u=r.y-s.y;s=r;var a=1e3/(1+n);f=.8*i*a+.2*f,h=.8*u*a+.2*h}function b(){window.clearInterval(a),window.cancelAnimationFrame(v);var t=e();l=t.x,p=t.y,o=Date.now();if(f<-r||f>r)c=i*f,l+=c;if(h<-r||h>r)d=i*h,p+=d;v=window.requestAnimationFrame(w)}function w(){var e=Date.now()-o,n=!1,r=0,i=0;c&&(r=-c*Math.exp(-e/u),r>.5||r<-0.5?n=!0:r=c=0),d&&(i=-d*Math.exp(-e/u),i>.5||i<-0.5?n=!0:i=d=0),n&&(t(l+r,p+i),v=window.requestAnimationFrame(w))}typeof n!="object"&&(n={});var r=typeof n.minVelocity=="number"?n.minVelocity:5,i=typeof n.amplitude=="number"?n.amplitude:.25,s,o,u=342,a,f,l,c,h,p,d,v;return{start:g,stop:b,cancel:m}}t.exports=r},{}],5:[function(e,t,n){function r(e){function i(){return n}function s(){var t=e.getBBox();return{left:t.x,top:t.y,width:t.width,height:t.height}}function o(){return n.getScreenCTM()}function u(t){var r=e.getScreenCTM();t.x=r.e,t.y=r.f,t.scale=r.a,n.removeAttributeNS(null,"viewBox")}function a(t){e.setAttribute("transform","matrix("+t.scale+" 0 0 "+t.scale+" "+t.x+" "+t.y+")")}var t=e instanceof SVGElement;if(!t)throw new Error("svg element is required for svg.panzoom to work");var n=e.ownerSVGElement;if(!n)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.setAttribute("tabindex",1);var r={getBBox:s,getScreenCTM:o,getOwner:i,applyTransform:a,initTransform:u};return r}t.exports=r},{}],6:[function(e,t,n){function r(){function r(r){t=window.document.onselectstart,n=window.document.ondragstart,window.document.onselectstart=i,e=r,e.ondragstart=i}function s(){window.document.onselectstart=t,e&&(e.ondragstart=n)}var e,t,n;return{capture:r,release:s}}function i(e){return e.stopPropagation(),!1}t.exports=r},{}],7:[function(e,t,n){function r(){this.x=0,this.y=0,this.scale=1}t.exports=r},{}],8:[function(e,t,n){function s(e,t,n){function g(){c.cancel(v),v=0}function y(){var t=a(m/d);m+=1,b(t),m<=d?(v=c.next(y),f(e)):(v=0,setTimeout(function(){l(e)},0))}function b(t){h.forEach(function(n){e[n]=s[n]*t+r[n]})}var r=Object.create(null),s=Object.create(null);n=n||{};var a=typeof n.easing=="function"?n.easing:i[n.easing];a||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),a=i.ease);var f=typeof n.step=="function"?n.step:o,l=typeof n.done=="function"?n.done:o,c=u(n.scheduler),h=Object.keys(t);h.forEach(function(n){r[n]=e[n],s[n]=t[n]-e[n]});var p=typeof n.duration=="number"?n.duration:400,d=Math.max(1,p*.06),v,m=0;return v=c.next(y),{cancel:g}}function o(){}function u(e){if(!e){var t=typeof window!="undefined"&&window.requestAnimationFrame;return t?a():f()}if(typeof e.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof e.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return e}function a(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function f(){return{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}function l(){function r(){e.clear(),t.clear(),cancelAnimationFrame(n),n=0}function i(e){t.add(e),s()}function s(){n||(n=requestAnimationFrame(o))}function o(){n=0;var r=t;t=e,e=r,e.forEach(function(e){e()}),e.clear()}function u(e){t.delete(e)}var e=new Set,t=new Set,n=0;return{next:i,cancel:i,clearAll:r}}var r=e("bezier-easing"),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};t.exports=s,t.exports.makeAggregateRaf=l,t.exports.sharedScheduler=l()},{"bezier-easing":9}],9:[function(e,t,n){function l(e,t){return 1-3*t+3*e}function c(e,t){return 3*t-6*e}function h(e){return 3*e}function p(e,t,n){return((l(t,n)*e+c(t,n))*e+h(t))*e}function d(e,t,n){return 3*l(t,n)*e*e+2*c(t,n)*e+h(t)}function v(e,t,n,r,i){var u,a,f=0;do a=t+(n-t)/2,u=p(a,r,i)-e,u>0?n=a:t=a;while(Math.abs(u)>s&&++f<o);return a}function m(e,t,n,i){for(var s=0;s<r;++s){var o=d(t,n,i);if(o===0)return t;var u=p(t,n,i)-e;t-=u/o}return t}function g(e){return e}var r=4,i=.001,s=1e-7,o=10,u=11,a=1/(u-1),f=typeof Float32Array=="function";t.exports=function(t,n,r,s){function c(e){var n=0,s=1,f=u-1;for(;s!==f&&o[s]<=e;++s)n+=a;--s;var l=(e-o[s])/(o[s+1]-o[s]),c=n+l*a,h=d(c,t,r);return h>=i?m(e,c,t,r):h===0?c:v(e,n,n+a,t,r)}if(0<=t&&t<=1&&0<=r&&r<=1){if(t===n&&r===s)return g;var o=f?new Float32Array(u):new Array(u);for(var l=0;l<u;++l)o[l]=p(l*a,t,r);return function(t){return t===0?0:t===1?1:p(c(t),n,s)}}throw new Error("bezier x values must be in [0, 1] range")}},{}],10:[function(e,t,n){function u(e,t,n){f(e,o,t,n),o=="DOMMouseScroll"&&f(e,"MozMousePixelScroll",t,n)}function a(e,t,n){l(e,o,t,n),o=="DOMMouseScroll"&&l(e,"MozMousePixelScroll",t,n)}function f(e,t,n,s){e[i](r+t,o=="wheel"?n:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:e.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:e.clientX,clientY:e.clientY,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){e.stopImmediatePropagation&&e.stopImmediatePropagation()}};return o=="mousewheel"?(t.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)):t.deltaY=e.detail,n(t)},s||!1)}function l(e,t,n,i){e[s](r+t,n,i||!1)}function c(e,t){e&&e.addEventListener?(i="addEventListener",s="removeEventListener"):(i="attachEvent",s="detachEvent",r="on"),t?o="onwheel"in t.createElement("div")?"wheel":t.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll":o="wheel"}t.exports=u,t.exports.addWheelListener=u,t.exports.removeWheelListener=a;var r="",i,s,o;c(typeof window!="undefined"&&window,typeof document!="undefined"&&document)},{}]},{},[1])(1)});